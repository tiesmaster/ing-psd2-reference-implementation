reqDate=`LC_TIME=en_US.UTF-8 date -u "+%a, %d %b %Y %H:%M:%S GMT"`

digest="SHA-256=dCup+ZCaQczuxE5H2yw+rC+T1OepyGSd0IfIqRM2hHU="
regID=`uuidgen`

signingString="(request-target): post /oauth2/token date: $reqDate digest: $digest x-ing-reqid: $regID"

signature=`printf "$signingString" | openssl dgst -sha256 -sign ~/sandboxcerts/example_client_signing.key -passin "pass:changeit" | openssl base64 -A`

#echo $signature

curl -i -X POST 'https://api.sandbox.ing.com/oauth2/token' \
	-H 'Accept: application/json, application/json, application/*+json,application/*+json' \
	-H 'Content-Type: text/plain;charset=UTF-8' \
	-H 'Content-Length: 294' \
	-H 'Digest: ' $digest \
	-H 'Date: {$reqDate}' \
	-H 'X-ING-ReqId: ' $regID \
	-H 'Signature: keyId="example_client_id",algorithm="rsa-sha256",headers="(request-target) date digest x-ing-reqid",signature=' $signature '"' \
	--data 'grant_type=client_credentials&scope=create_order+granting+payment-requests+payment-requests%3Aview+payment-requests%3Acreate+payment-requests%3Aclose+virtual-ledger-accounts%3Afund-reservation%3Acreate+virtual-ledger-accounts%3Afund-reservation%3Adelete+virtual-ledger-accounts%3Abalance%3Aview' \
	--cert ~/sandboxcerts/example_client_tls.cer \
        --key ~/sandboxcerts/example_client_tls.key

accestoken="eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2Q0JDLUhTNTEyIiwia2lkIjoidHN0LTRjOGI1Mzk3LTFhYjgtNDFhOC1hNTViLWE3MTk5MTJiODNkMiIsImN0eSI6IkpXVCJ9..BwHuc04RWij6Jmv4X6hM5w.UUuK58AnS7UMESubLtwybOLz5EEt_ZRdggLsRQJlPRXvPxJVId5iq3mkavYk8gSLeJpyiIh0U2EiUi5OtQvzQmKWynYPHZaBRSPCZMeqhlhSjYx0XIdHTP1mWJJrnw79pSkmPifP3CRfW44ThBOfDw4YAHXJxzyC2rPNPqpbrOI_Sf64mqDud5lwoKCqld-84YPInHAz5KuQrvgiXY9sr8cQjhNwcmhbkfLIDOZ5A9USIOy0ZOWfG1VLWI6UiuCWtxE8LwTQ05PnvJnI7q-wlVMczXbch88xEkgz2Ph_dcfcFdpVe97ets_-6NX7C_geVKexi3RWg707o6UNo9KavBNX7bw5sU04h9Ot94bo5FrD5ZP6q0MmA-_lGbT2KddqSuhmuMlRVLWimJoIYN8PggMwNKn99ZQlUl1SIMug-E0RMJW-HPG7RD0RkLhhqft67aNUcN2ce5KlufYT5hZO7KA84yPaFc8wqEa0r0Q_JH78791CkRtdq8XgWcUmhJLOd4KUAcSRG-bJEvnUpic1j3NYOwUcB4aCNCXizPPg915Pyl7y-xDyD4PWpHerPIT9jdm65pFZSRQghTz_Dif3UPrzB3YYOc5Pkzq6gwruopuKYpTkIPUtoyw-xuKXAsh87MmDL78Rj7THN-zOgiCP04lGsXI5L3h_6iJfwt2Vi1I98d7b6Wbw1t5FkkTRkYDkQBhA8S9Nc27X2HVAbWFdD6ZNn42I_7aDvZ2sTpcsB5hjta7KJjBWGaoI6oQDJU33L3k-SkR6FbzP-4IZ5RPBEW57KBg5PR8dCiFa8wKjAP85QhxoCOiTFybdTCyJFWXeePzi0n-GtGrRNi66VGj6ELCI-9APdpamF8_fQNyuVhPTUdZMjO0v9D0dhgJlZ7VO-Wz48LihSjyMH8nRXUarc95QrK75cRTAKnIuE-Bt63PHUNpqJ-PN7HDr4iSoZU8U_cNddCIu9HnZlzRS-a1o-FUDhMigI08oxrCmNwLFv0D80i_eIspEkM3QuddD9Gs1uf4YRn3XLU5YDM7a0g6tfu1DeFaT-myFgCu8mr1gIORjeabjh6jnwNGvC61PiSv-ghSPBoNfHuTR_1ACAd-ukAfhxqOUAQ0DB6ljS3DZ2dPL6wRsjDlCuDz5TrnNXVYrJItf5Z42dqZL-luULW_DJ4jtsimPagBryWBywlqBr192nbLKPDcMqh6ndAkcMawyZZwHrFnGHVg62ltdJvRL6I6IHDRnMBOBAPVB9iVYkmZwdjTy5tfaWN_kz4vyYrxIRvPAn_XFepx6bRWE56ixF8SQYhIgXHn3p-7tz2IHSfbNI2yOSQNBjp5z97jwEVQq0YfE8C26TPHsfRFSH1VqcB7YaHkZKBk5xeveYi2Bta323bxXjOvxdIuyrc5Y8DVHx740J2ZtnhnsICX3oNzOg8KV1KVDL7ea93o0OP0IWxhteGkTNI8J49eUk8kFWVd1oC84epM5efH7IkD3pYmCHyjJPfeHJsxrN-tngVpc__8vAOgBhon-1I193CNuYRWmzIf7kClCKNYHJgo6_o_HeZmfLjF74z1TY7RqiWt8_QaHr6kS42SYtVtDxIeIL0XkJPolLrmC0qgRtnNC8IMuZuzpEwqR8--WbWLwSUpbvMseUMt6NPMLmH-LmxoMLBw0lHWqhpgifExXbvuTjAIvoOjxp17pd09LivZg0FN4-W4GPmsJcapgFYb2kkQgjOk4BX2XzNl1UtC7_tjg5Isblkzj-UPiZxq_Nc2x3-JnWxvP5NNPUf6Hq141rXZ2_ljl_9h43TQSjhyaT92vguqBY2pYRRUNgAHYhJdP0etXqNT_83IdZxjxX8LFLsM7OMVaVoyazk8x-wR_j_s8OCh2SxR1QCvMB5pLZRaweJVdvLLsYsKp-xy3_NPjYua1IJgy3idx_tWxDsjg0Fn3xlGQaBiFmU0d97R4dNysXBOBa5PYCnrL8PLFEFJkZJJKB5p5n0pA_HYapXO4K2kUEX38oDUStB6zAC6FNsyPjPEWpy52jlJYAeQAwNgIq1af_rRWujTCM3mUI8fCsalvQcn_HZ6lSrGbBrygn6-QfmDRx87Q3AmdlB3mlRYVl9bNfTctxp8M5yUxduDr2gaxftDFrJ6qWKv85mNqbg8g7WosLPem7qZdYYb6nPgoL4xQ72XsIkFvtmgD3fCd6e0DlbMN_LHMC7lb_g7p7ACQr-Ca2Lxojd-9RIZzDkH6dzi9B230n8XGkKtcDRFpcGp2BD5YhHYpRkhdtwGsacRUOcR80axzDk5MrL6bp3YAA0ToZUHt9cBbqd4BA5XT3n7bGktItwa-46JypCtBESp0oNIuLczVya-lcbnXLpRqiXdZabEjCfIdX2pPqdewDOx4dUdgJwgUCbAK15QQpjj4nU30XS2L78SrBS6xFqWTGKFWdRZhNhCwvPqPS4RViIxCtu4eSseqUX1VqHwTWleJq06dFaCJ7F5gP7G2DxOajBYvC5C8f-82xc4D1JIg7mOVbHYKZ-vHKSsoe8Lcc2ec2dk_wDqGFv-Zo9y9vlxdLtp446mKFyELTeSKY6GRdRtcb71NQ7xEPqhOBUHFpAUSwP24GIW96KsRebZCXdYRSQZPCuJ1E_Cc1DqzPyt9SRq6Mw6IEDG0pwfUE_4-oLRT4Bvy3Dw.yNtF-Jm6BOt-6Ro8XrmPzOAdzwMz21m9sEAwxfp75DI"


